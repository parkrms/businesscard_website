<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Interactive Portfolio</title>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.4/p5.min.js"></script>
    <script src="sketch.js"></script>
    
    <style>
      /* --- [ê¸°ë³¸ ì„¤ì •] --- */
      * { box-sizing: border-box; margin: 0; padding: 0; }
      
      html, body {
        width: 100%; height: 100%; overflow: hidden;
        background-color: #1a1a1a;
        font-family: -apple-system, BlinkMacSystemFont, "Pretendard", "Segoe UI", Roboto, sans-serif;
        /* ê¸°ë³¸ì ìœ¼ë¡œ í„°ì¹˜ ì œìŠ¤ì²˜ ë§‰ìŒ (p5.js ì¡°ì‘ ìœ„í•´) */
        touch-action: none; 
        user-select: none; -webkit-user-select: none;
      }
      
      canvas { display: block; position: absolute; top: 0; left: 0; z-index: 1; }

      /* --- [ìƒì„¸ í˜ì´ì§€ ë ˆì´ì–´] --- */
      #detail-layer {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        z-index: 100;
        opacity: 0; pointer-events: none;
        transition: opacity 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
        background: rgba(0, 0, 0, 0.65); /* ë°°ê²½ ì¡°ê¸ˆ ë” ì–´ë‘¡ê²Œ */
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        
        /* [ì¤‘ìš”] ìƒì„¸ í˜ì´ì§€ì—ì„œëŠ” í„°ì¹˜/ìŠ¤í¬ë¡¤ í—ˆìš© */
        touch-action: auto; 
        overflow-y: auto; /* ì „ì²´ í˜ì´ì§€ ìŠ¤í¬ë¡¤ í—ˆìš© */
        -webkit-overflow-scrolling: touch;
      }

      #detail-layer.active { opacity: 1; pointer-events: auto; }

      /* --- [ì½˜í…ì¸  ë˜í¼] --- */
      #content-wrapper {
        position: relative;
        width: 100%; min-height: 100%;
        padding: 80px 40px; /* ìƒí•˜ì¢Œìš° ì—¬ë°± */
        display: flex;
        flex-direction: row;
        justify-content: center;
        opacity: 0; transform: translateY(30px);
        transition: all 0.5s ease 0.2s;
        max-width: 1400px; margin: 0 auto;
      }
      #detail-layer.active #content-wrapper { opacity: 1; transform: translateY(0); }

      /* --- [ë‹«ê¸° ë²„íŠ¼ (X ì•„ì´ì½˜)] --- */
      .btn-close-icon {
        position: fixed; top: 30px; right: 30px;
        width: 50px; height: 50px;
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 50%;
        cursor: pointer; z-index: 200;
        display: flex; align-items: center; justify-content: center;
        transition: all 0.3s ease;
        backdrop-filter: blur(10px);
        /* ë‹«ê¸° ë²„íŠ¼ì€ í•­ìƒ í„°ì¹˜ ê°€ëŠ¥í•´ì•¼ í•¨ */
        touch-action: manipulation; 
      }
      .btn-close-icon:hover { background: rgba(255, 255, 255, 0.25); transform: rotate(90deg); }
      .btn-close-icon svg { width: 24px; height: 24px; fill: white; }

      /* --- [ì™¼ìª½ ì„¹ì…˜: í”„ë¡œì íŠ¸ ì •ë³´] --- */
      .left-section { 
        width: 40%; padding-right: 60px;
        display: flex; flex-direction: column; justify-content: center;
        color: #fff; text-align: left;
        /* ëª…í•¨ì´ ë“¤ì–´ì˜¬ ìë¦¬ í™•ë³´ (íˆ¬ëª… ë°•ìŠ¤) */
        padding-top: 300px; 
      }
      
      .project-label {
        font-size: 14px; font-weight: 600; letter-spacing: 2px;
        color: rgba(255,255,255,0.5); margin-bottom: 15px; text-transform: uppercase;
      }
      .project-title { 
        font-size: 56px; font-weight: 800; margin-bottom: 25px; 
        line-height: 1.1; letter-spacing: -1px;
        background: linear-gradient(to right, #fff, #aaa);
        -webkit-background-clip: text; -webkit-text-fill-color: transparent;
      }
      .project-desc { 
        font-size: 18px; line-height: 1.7; color: rgba(255,255,255,0.8); 
        margin-bottom: 40px; max-width: 90%;
      }

      /* --- [ì˜¤ë¥¸ìª½ ì„¹ì…˜: í¬íŠ¸í´ë¦¬ì˜¤ ê·¸ë¦¬ë“œ] --- */
      .right-section { width: 60%; padding-top: 20px; }

      .grid-container { 
        display: grid; 
        grid-template-columns: repeat(2, 1fr); /* 2ì—´ ê·¸ë¦¬ë“œ */
        gap: 25px; 
      }
      
      .grid-item {
        background: rgba(255,255,255,0.05); 
        border: 1px solid rgba(255,255,255,0.1);
        border-radius: 12px;
        height: 280px; 
        display: flex; align-items: center; justify-content: center;
        color: rgba(255,255,255,0.2); font-weight: 600;
        transition: transform 0.3s, border-color 0.3s;
        overflow: hidden;
      }
      .grid-item:hover { 
        transform: translateY(-5px); 
        border-color: rgba(255,255,255,0.3);
        background: rgba(255,255,255,0.08);
      }
      
      /* í…ìŠ¤íŠ¸ ë¸”ë¡ ìŠ¤íƒ€ì¼ */
      .text-block { 
        grid-column: span 2; /* ê°€ë¡œë¡œ ê½‰ ì°¨ê²Œ */
        height: auto; min-height: 200px;
        padding: 40px; 
        display: flex; flex-direction: column; align-items: flex-start; justify-content: center;
        background: linear-gradient(135deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
      }
      .text-block h3 { color: #fff; margin-bottom: 15px; font-size: 26px; }
      .text-block p { color: rgba(255,255,255,0.6); line-height: 1.6; font-size: 16px; }

      /* --- [? ë²„íŠ¼] --- */
      #help-btn {
        position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%);
        width: 48px; height: 48px;
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 50%; color: white;
        font-size: 20px; font-weight: 700;
        display: flex; align-items: center; justify-content: center;
        cursor: pointer; z-index: 50;
        backdrop-filter: blur(10px);
        transition: all 0.2s;
        touch-action: manipulation;
      }
      #help-btn:active, #help-btn:hover { background: rgba(255, 255, 255, 0.25); transform: translateX(-50%) scale(1.1); }

      /* --- [ë„ì›€ë§ ëª¨ë‹¬] --- */
      #help-modal {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: rgba(0, 0, 0, 0.85); z-index: 200;
        display: flex; align-items: center; justify-content: center;
        opacity: 0; pointer-events: none; transition: opacity 0.3s;
        backdrop-filter: blur(8px);
        touch-action: auto;
      }
      #help-modal.show { opacity: 1; pointer-events: auto; }
      
      .modal-box {
        background: #1f1f1f; border: 1px solid rgba(255, 255, 255, 0.1);
        padding: 40px; border-radius: 20px;
        text-align: center; color: white; width: 90%; max-width: 360px;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
      }
      .modal-box h3 { margin-bottom: 20px; font-size: 24px; color: #fff; }
      .modal-box p { line-height: 1.8; color: #bbb; margin-bottom: 30px; font-size: 16px; }
      .close-help {
        padding: 14px 40px; background: white; color: black;
        border: none; border-radius: 50px; font-weight: 700; font-size: 16px;
        cursor: pointer; transition: transform 0.2s;
      }
      .close-help:active { transform: scale(0.95); }

      /* --- [ëª¨ë°”ì¼ ë°˜ì‘í˜•] --- */
      @media (max-width: 900px) {
        #content-wrapper { flex-direction: column; padding: 100px 24px 40px 24px; } /* ìƒë‹¨ ì—¬ë°± í™•ë³´ (ë‹«ê¸° ë²„íŠ¼) */
        
        .btn-close-icon { top: 20px; right: 20px; width: 44px; height: 44px; }
        
        .left-section { 
          width: 100%; padding-right: 0; padding-top: 220px; /* ëª…í•¨ ìë¦¬ */
          text-align: left; margin-bottom: 40px;
        }
        .project-title { font-size: 36px; }
        .project-desc { font-size: 16px; max-width: 100%; }
        
        .right-section { width: 100%; }
        .grid-container { grid-template-columns: 1fr; gap: 20px; } /* ëª¨ë°”ì¼ 1ì—´ */
        .text-block { grid-column: span 1; padding: 25px; }
      }
    </style>
  </head>
  <body>
    <div id="detail-layer">
      <button class="btn-close-icon" onclick="closeDetail()">
        <svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
      </button>

      <div id="content-wrapper">
        <div class="left-section">
          <div class="project-label">Interaction Design</div>
          <div class="project-title">DIGITAL<br>WEATHERING</div>
          <div class="project-desc">
            ì‹œê°„ì˜ íë¦„ì— ë”°ë¼ ë°ì´í„°ê°€ ë‚¨ê¸°ëŠ” í”ì ì„ ì‹œê°í™”í–ˆìŠµë‹ˆë‹¤.<br>
            ì‚¬ìš©ìì˜ í„°ì¹˜ì™€ ì›€ì§ì„ì´ ë¬¼ë¦¬ì ì¸ í˜ì´ ë˜ì–´<br>
            ë””ì§€í„¸ ê³µê°„ ì† ëª…í•¨ì— ê³ ìœ í•œ í’í™”ë¥¼ ì¼ìœ¼í‚µë‹ˆë‹¤.
          </div>
        </div>
        
        <div class="right-section">
          <div class="grid-container">
            <div class="grid-item text-block">
              <h3>Design Process</h3>
              <p>ì´ˆê¸° ìŠ¤ì¼€ì¹˜ë¶€í„° ìµœì¢… ë Œë”ë§ê¹Œì§€ì˜ ê³¼ì •ì„ ê¸°ë¡í–ˆìŠµë‹ˆë‹¤. ë¬¼ë¦¬ ì—”ì§„ì˜ ë³€ìˆ˜(ë§ˆì°°ë ¥, ì¤‘ë ¥)ë¥¼ ìˆ˜ë°± ë²ˆ í…ŒìŠ¤íŠ¸í•˜ë©° ìµœì ì˜ ìì—°ìŠ¤ëŸ¬ì›€ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤.</p>
            </div>
            <div class="grid-item">Concept Art 01</div>
            <div class="grid-item">Prototype A</div>
            <div class="grid-item">Prototype B</div>
            <div class="grid-item">Final Render</div>
            <div class="grid-item text-block">
              <h3>Tech Stack</h3>
              <p>Built with p5.js & WebGL.<br>Optimized for Mobile & Desktop.</p>
            </div>
            <div class="grid-item">Code Snippet</div>
          </div>
        </div>
      </div>
    </div>

    <div id="help-btn">?</div>

    <div id="help-modal">
      <div class="modal-box">
        <h3>How to Interact</h3>
        <p id="help-text">Loading...</p>
        <button class="close-help">Start Experience</button>
      </div>
    </div>

    <script>
      const helpBtn = document.getElementById('help-btn');
      const helpModal = document.getElementById('help-modal');
      const helpText = document.getElementById('help-text');
      const closeHelp = document.querySelector('.close-help');

      const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);

      helpBtn.addEventListener('click', (e) => {
        e.stopPropagation(); 
        if (isMobile) {
          helpText.innerHTML = "ğŸ‘† <b>ë“œë˜ê·¸:</b> ëª…í•¨ ì´ë™<br>ğŸ‘† <b>í„°ì¹˜:</b> ë’¤ì§‘ê¸°<br>â± <b>1ì´ˆ ê¾¹:</b> ìƒì„¸ ë³´ê¸°<br>ğŸ“± <b>íœ´ëŒ€í° í”ë“¤ê¸°:</b> ëª…í•¨ ì„ê¸°";
          // ëª¨ë°”ì¼ í”ë“¤ê¸° ê¶Œí•œ ìš”ì²­
          if (typeof DeviceMotionEvent !== 'undefined' && typeof DeviceMotionEvent.requestPermission === 'function') {
            DeviceMotionEvent.requestPermission()
              .then(response => { if (response === 'granted') console.log('Motion granted'); })
              .catch(console.error);
          }
        } else {
          helpText.innerHTML = "ğŸ–± <b>ë“œë˜ê·¸:</b> ëª…í•¨ ì´ë™<br>ğŸ–± <b>í´ë¦­:</b> ë’¤ì§‘ê¸°<br>â± <b>1.5ì´ˆ ê¾¹:</b> ìƒì„¸ ë³´ê¸°<br>ğŸ’¨ <b>ë§ˆìš°ìŠ¤ í”ë“¤ê¸°:</b> ëª…í•¨ ì„ê¸°";
        }
        helpModal.classList.add('show');
      });

      closeHelp.addEventListener('click', (e) => {
        e.stopPropagation();
        helpModal.classList.remove('show');
      });
    </script>
  </body>
</html>
